{% extends 'base.html' %}

{% block title %}Text-to-Speech - {{ SITE_NAME }}{% endblock %}
{% block meta_description %}Convert text to speech audio. Generate MP3 audio files from text using text-to-speech technology.{% endblock %}

{% block content %}
<div class="card">
    <h1 class="card-title">Text-to-Speech</h1>
    <p style="color: var(--text-secondary); margin-bottom: 2rem;">Convert text to speech audio</p>
    
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
    
    {% if not gtts_available and not messages %}
    <div class="alert alert-info">
        <strong>Note:</strong> Text-to-speech requires gTTS library. Install with: pip install gtts
    </div>
    {% endif %}
    
    <form method="post" class="converter-tool">
        {% csrf_token %}
        <div class="form-group">
            <label class="form-label">Text to Convert</label>
            <textarea name="text" id="text" rows="8" class="form-control" placeholder="Enter text to convert to speech..." required maxlength="5000"></textarea>
            <small style="color: var(--text-secondary); margin-top: 0.5rem; display: block;">
                Maximum 5000 characters
            </small>
        </div>
        
        <div class="form-group">
            <label class="form-label">Language</label>
            <select name="language" id="language" class="form-control">
                <option value="en">English</option>
                <option value="es">Spanish</option>
                <option value="fr">French</option>
                <option value="de">German</option>
                <option value="it">Italian</option>
                <option value="pt">Portuguese</option>
                <option value="ru">Russian</option>
                <option value="ja">Japanese</option>
                <option value="ko">Korean</option>
                <option value="zh">Chinese</option>
                <option value="ar">Arabic</option>
                <option value="hi">Hindi</option>
            </select>
        </div>
        
        <button type="submit" class="btn btn-primary btn-block" id="submit-btn">Generate Speech</button>
    </form>
    
    <div style="margin-top: 2rem; padding: 1rem; background: var(--surface); border-radius: 6px;">
        <h3>How to use:</h3>
        <ol class="list-indent" style="margin-top: 0.5rem;">
            <li>Enter or paste the text you want to convert</li>
            <li>Select the language</li>
            <li>Click "Generate Speech"</li>
            <li>Download the MP3 audio file</li>
        </ol>
        <p style="margin-top: 1rem; color: var(--text-secondary);">
            <strong>Note:</strong> Text-to-speech requires an internet connection to generate audio.
        </p>
    </div>
</div>

<a href="{% url 'utilities:index' %}" class="btn btn-secondary">‚Üê Back to Utilities</a>

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('.converter-tool');
    const submitBtn = document.getElementById('submit-btn');
    const textarea = document.getElementById('text');
    
    // Character counter
    textarea.addEventListener('input', function() {
        const charCount = this.value.length;
        const maxChars = 5000;
        const counter = document.querySelector('small');
        counter.textContent = `${charCount} / ${maxChars} characters`;
        
        if (charCount > maxChars) {
            counter.style.color = 'var(--error-color, #dc3545)';
        } else {
            counter.style.color = 'var(--text-secondary)';
        }
    });
    
    const originalText = submitBtn.textContent;
    form.addEventListener('submit', function() {
        submitBtn.textContent = 'Generating...';
        submitBtn.disabled = true;
        
        setTimeout(function() {
            submitBtn.textContent = originalText;
            submitBtn.disabled = false;
        }, 2000);
    });
});
</script>
{% endblock %}
{% endblock %}

