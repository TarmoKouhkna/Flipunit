{% extends 'base.html' %}

{% block title %}Random Number Generator - Generate Random Numbers - {{ SITE_NAME }}{% endblock %}
{% block meta_description %}Generate random numbers. Create random numbers within a specified range with options for duplicates and multiple numbers.{% endblock %}

{% block extra_css %}
<style>
#generated-numbers {
    line-height: 1.8;
    margin: 0;
}

/* Custom scrollbar for numbers container */
.numbers-scroll-container {
    scrollbar-width: thin;
    scrollbar-color: var(--primary-accent) var(--surface);
}

.numbers-scroll-container::-webkit-scrollbar {
    width: 10px;
}

.numbers-scroll-container::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 4px;
}

.numbers-scroll-container::-webkit-scrollbar-thumb {
    background: var(--primary-accent);
    border-radius: 4px;
}

.numbers-scroll-container::-webkit-scrollbar-thumb:hover {
    background: var(--secondary-accent);
}

@media (max-width: 767px) {
    .alert-success > div[style*="display: flex"] button {
        flex: 1;
        min-width: 0;
    }
    
    #generated-numbers {
        font-size: 1rem !important;
    }
    
    .numbers-scroll-container {
        max-height: 300px !important;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="card">
    <h1 class="card-title">Random Number Generator - Generate Random Numbers</h1>
    <p style="color: var(--text-secondary); margin-bottom: 2rem;">Generate random numbers within a specified range</p>
    
    {% if error %}
        <div class="alert alert-error">
            {{ error }}
        </div>
    {% endif %}
    
    {% if result %}
        <div class="alert alert-success" style="margin-bottom: 2rem;">
            <h3 style="margin-bottom: 0.5rem;">Generated Numbers:</h3>
            {% if result.output_format == 'comma' %}
            <pre id="generated-numbers" class="numbers-scroll-container" style="font-size: 1.2rem; font-family: monospace; white-space: pre-wrap; word-break: break-all; background: var(--surface); padding: 1rem; border-radius: 8px; margin: 1rem 0; max-height: 400px; overflow-y: scroll; overflow-x: hidden;">{{ result.numbers|join:", " }}</pre>
            {% else %}
            <pre id="generated-numbers" class="numbers-scroll-container" style="font-size: 1.2rem; font-family: monospace; white-space: pre-wrap; word-break: break-all; background: var(--surface); padding: 1rem; border-radius: 8px; margin: 1rem 0; max-height: 400px; overflow-y: scroll; overflow-x: hidden;">{% for number in result.numbers %}{{ number }}
{% endfor %}</pre>
            {% endif %}
            <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                <p><strong>Count:</strong> {{ result.count }}</p>
                <p><strong>Range:</strong> {{ result.min }} - {{ result.max }}</p>
                <p><strong>Sum:</strong> {{ result.sum }}</p>
                <p><strong>Average:</strong> {{ result.average|floatformat:2 }}</p>
            </div>
            <div style="display: flex; gap: 0.5rem; margin-top: 1rem; flex-wrap: wrap;">
                <button onclick="copyNumbersToClipboard()" class="btn btn-primary">
                    Copy Numbers to Clipboard
                </button>
                <button onclick="clearResults()" class="btn btn-secondary">
                    Clear
                </button>
            </div>
        </div>
    {% endif %}
    
    <form method="post" class="converter-tool">
        {% csrf_token %}
        <div class="form-group">
            <label class="form-label">Minimum Value</label>
            <input type="number" name="min_value" id="min_value" class="form-control" value="1" required>
        </div>
        
        <div class="form-group">
            <label class="form-label">Maximum Value</label>
            <input type="number" name="max_value" id="max_value" class="form-control" value="100" required>
        </div>
        
        <div class="form-group">
            <label class="form-label">Number of Random Numbers</label>
            <input type="number" name="count" id="count" class="form-control" value="1" min="1" max="1000" required>
            <small style="color: var(--text-secondary); margin-top: 0.5rem; display: block;">
                Maximum 1000 numbers
            </small>
        </div>
        
        <div class="form-group">
            <label class="form-label">
                <input type="checkbox" name="allow_duplicates" id="allow_duplicates" checked>
                Allow duplicate numbers
            </label>
        </div>
        
        <div class="form-group">
            <label class="form-label">Output Format</label>
            <select name="output_format" id="output_format" class="form-control">
                <option value="lines">One per line (for lottery)</option>
                <option value="comma">Comma-separated (for display)</option>
            </select>
            <small style="color: var(--text-secondary); margin-top: 0.5rem; display: block;">
                Choose how numbers should be displayed
            </small>
        </div>
        
        <button type="submit" class="btn btn-primary btn-block">Generate Numbers</button>
    </form>
    
    <div style="margin-top: 2rem; padding: 1rem; background: var(--surface); border-radius: 6px;">
        <h3>How to use:</h3>
        <ol class="list-indent" style="margin-top: 0.5rem;">
            <li>Set the minimum and maximum values for the range</li>
            <li>Specify how many random numbers to generate</li>
            <li>Choose whether to allow duplicate numbers</li>
            <li>Select output format: one per line (for lottery) or comma-separated (for display)</li>
            <li>Click "Generate Numbers"</li>
        </ol>
        <p style="margin-top: 1rem; color: var(--text-secondary);">
            <strong>Note:</strong> If duplicates are not allowed, the count cannot exceed the range size.
        </p>
    </div>
</div>

<a href="{% url 'utilities:index' %}" class="btn btn-secondary">‚Üê Back to Utilities</a>

{% block extra_js %}
<script>
async function copyNumbersToClipboard() {
    const numbersText = document.getElementById('generated-numbers').textContent.trim();
    
    try {
        await navigator.clipboard.writeText(numbersText);
        // Successfully copied - no popup needed
    } catch (err) {
        // Fallback: Create a temporary textarea
        const tempTextarea = document.createElement('textarea');
        tempTextarea.value = numbersText;
        tempTextarea.style.position = 'fixed';
        tempTextarea.style.left = '-9999px';
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        
        try {
            document.execCommand('copy');
        } catch (err2) {
            console.error('Failed to copy:', err2);
        }
        
        document.body.removeChild(tempTextarea);
    }
}

function clearResults() {
    // Remove the results alert
    const alert = document.querySelector('.alert-success');
    if (alert) {
        alert.remove();
    }
    
    // Scroll to the form
    const form = document.querySelector('form.converter-tool');
    if (form) {
        form.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
}
</script>
{% endblock %}
{% endblock %}



