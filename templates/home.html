{% extends 'base.html' %}
{% load static %}

{% block title %}Home - {{ SITE_NAME }}{% endblock %}
{% block meta_description %}Free online converters - Unit converters, image converters, media converters, and utilities. Fast, simple, no-login required tools for everyday use.{% endblock %}
{% block og_title %}{{ SITE_NAME }} - Free Online Converter Hub{% endblock %}
{% block og_description %}{{ SITE_DESCRIPTION }}{% endblock %}

{% block extra_css %}
<style>
.search-btn {
    background: var(--card-bg) !important;
    border: none !important;
    border-radius: 8px !important;
    padding: 1rem 2rem !important;
    box-shadow: var(--shadow) !important;
    transition: transform 0.2s, box-shadow 0.2s, background 0.3s ease !important;
    color: var(--text-primary) !important;
    font-weight: 500 !important;
    cursor: pointer !important;
}
.search-btn:hover {
    background: var(--card-bg) !important;
    transform: translateY(-4px) !important;
    box-shadow: var(--shadow-lg) !important;
}
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="hero">
        <h1>Welcome to {{ SITE_NAME }}</h1>
        <p>Simple, fast, no-login required online converter hub</p>
    </div>

    <div style="margin-bottom: 3rem;">
        <form method="get" action="{% url 'search' %}" class="search-form container-narrow">
            <div style="display: flex; align-items: stretch;" class="gap-xs">
                <input type="search" name="q" id="search-input" class="form-control" placeholder="Search for tools, converters, and utilities..." value="{{ request.GET.q|default:'' }}" style="flex: 1; font-size: 1.1rem; padding: 1rem; border-radius: 8px; border: 2px solid var(--border-color);">
                <button type="submit" class="btn btn-primary search-btn" style="padding: 1rem 2rem; font-size: 1.1rem; border-radius: 8px; white-space: nowrap;">Search</button>
            </div>
            <p style="text-align: center; color: var(--text-secondary); margin-top: 0.5rem; font-size: 0.9rem;">Search across all {{ categories|length }} categories and 100+ tools</p>
        </form>
    </div>
</div>

<div class="tool-categories">
    <div class="grid grid-2">
        {% for category in categories %}
        <a href="{% url category.url %}" class="category-card">
            <div class="category-icon">
                {% with 'images/icons/'|add:category.icon as icon_path %}
                <img src="{% static icon_path %}" alt="{{ category.name }}">
                {% endwith %}
            </div>
            <h3>{{ category.name }}</h3>
            <p>{{ category.description }}</p>
        </a>
        {% endfor %}
    </div>
</div>

<div class="feedback-section">
    <form method="post" class="feedback-form">
        {% csrf_token %}
        <textarea name="feedback" id="feedback-textarea" placeholder="Your feedback..." rows="3" maxlength="1000" required></textarea>
        <div class="feedback-footer">
            <span class="char-count"><span id="char-count">0</span>/1000</span>
            <button type="submit">Send Feedback</button>
        </div>
    </form>
</div>

{% if request.GET.feedback_sent %}
<div class="messages" id="feedback-success-message">
    <div class="alert alert-success">
        Thank you for your feedback!
    </div>
</div>
<script>
// Show success message and remove URL parameter to prevent it from showing on refresh
(function() {
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has('feedback_sent')) {
        // Remove the parameter from URL without page reload
        urlParams.delete('feedback_sent');
        const newUrl = window.location.pathname + (urlParams.toString() ? '?' + urlParams.toString() : '');
        window.history.replaceState({}, '', newUrl);
        
        // Auto-hide the message after 7 seconds
        const successMessage = document.getElementById('feedback-success-message');
        if (successMessage) {
            const alert = successMessage.querySelector('.alert-success');
            if (alert) {
                setTimeout(function() {
                    alert.style.transition = 'opacity 0.5s ease-out';
                    alert.style.opacity = '0';
                    setTimeout(function() {
                        successMessage.style.display = 'none';
                    }, 500);
                }, 7000);
            }
        }
    }
})();
</script>
{% endif %}
{% endblock %}

